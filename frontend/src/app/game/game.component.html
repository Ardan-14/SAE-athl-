<div class="game-container">

  <div *ngIf="topScores.length > 0">
    <h2>Top 3 Scores</h2>
    <ul>
      <li *ngFor="let score of topScores | slice:0:3">
        {{ score.valeur }} : {{ score.joueur_id }}
      </li>
    </ul>
  </div>
  

  <app-inscription-modal *ngIf="!hidePseudo"
    (inscriptionSuccess)="onInscriptionSuccess($event)"></app-inscription-modal>

  <p *ngIf="welcomeMessage && !hidePseudo">{{ welcomeMessage }}</p>

  <button *ngIf="welcomeMessage && !hidePseudo" (click)="startGame()" class="play-button">Jouer</button>

  <div class="title-container">
    <p class="title" *ngIf="hidePseudo">C'est parti !</p>
  </div>

  <div *ngIf="showGame" class="iframe-container">
    <iframe [src]="safeGameUrl" width="600" height="400"></iframe>
  </div>

  <div *ngIf="showGame">
    <label for="scoreInput">J'inscris mon 1 er score : </label>
    <input
      id="scoreInput"
      type="number"
      [(ngModel)]="score"
      (ngModelChange)="validateScore()"
      [maxlength]="3"
    >
    <button (click)="submitScore()" [disabled]="!isValidScore">OK</button>
    <p *ngIf="showWarning" style="color: red;">
      Êtes-vous sûr ? Le score ne doit pas dépasser le chiffre 100.
    </p>
  </div>
  

  <div *ngIf="showQuiz">
    <app-quiz [quizIndex]="currentQuizIndex" [isLastQuiz]="currentQuizIndex === quizIds.length - 1"
      [joueurId]="joueurId" (quizCompleted)="onQuizCompleted($event)" (readyForNextGame)="onReadyForNextGame()">
    </app-quiz>
  </div>

  <div *ngIf="showSecondGame" class="iframe-container">
    <iframe [src]="safeSecondGameUrl" width="600" height="400"></iframe>
  </div>

  <div *ngIf="showSecondGame">
    <label for="scoreInput">J'inscris mon 2 ème score : </label>
    <input
      id="scoreInput"
      type="number"
      [(ngModel)]="score"
      (ngModelChange)="validateScore()"
      [maxlength]="3"
    >
    <button (click)="submitScore()" [disabled]="!isValidScore">OK</button>
    <p *ngIf="showWarning" style="color: red;">
      Êtes-vous sûr ? Le score ne doit pas dépasser le chiffre 100.
    </p>
  </div>

  <div *ngIf="showThirdGame" class="iframe-container">
    <iframe [src]="safeThirdGameUrl" width="600" height="400"></iframe>
  </div>

  <div *ngIf="showThirdGame">
    <label for="scoreInput">J'inscris mon 3 ème score : </label>
    <input
      id="scoreInput"
      type="number"
      [(ngModel)]="score"
      (ngModelChange)="validateScore()"
      [maxlength]="3"
    >
    <button (click)="submitScore()" [disabled]="!isValidScore">OK</button>
    <p *ngIf="showWarning" style="color: red;">
      Êtes-vous sûr ? Le score ne doit pas dépasser le chiffre 100.
    </p>
  </div>

  <div *ngIf="showFourthGame" class="iframe-container">
    <iframe [src]="safeFourthGameUrl" width="600" height="400"></iframe>
  </div>

  <div *ngIf="showFourthGame">
    <label for="scoreInput">J'inscris mon 4 ème score : </label>
    <input
      id="scoreInput"
      type="number"
      [(ngModel)]="score"
      (ngModelChange)="validateScore()"
      [maxlength]="3"
    >
    <button (click)="submitScore()" [disabled]="!isValidScore">OK</button>
    <p *ngIf="showWarning" style="color: red;">
      Êtes-vous sûr ? Le score ne doit pas dépasser le chiffre 100.
    </p>
</div>